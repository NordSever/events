(()=>{"use strict";var e={p:""};class s{constructor(e=4){this.size=e,this.element=document.createElement("div"),this.element.classList.add("board"),this.ArrayCells=[],this.numberCells=this.size**2}createBoard(){this.element.innerHTML="";for(let e=0;e<this.numberCells;e++){let s=document.createElement("div");s.classList.add("cell"),s.style["aspect-ratio"]="1/1",s.dataset.id=e,this.ArrayCells.push(s),this.element.append(s)}this.element.style["grid-template-columns"]=`repeat(${this.size}, minmax(100px, 120px))`}getRandomCell(){const e=Math.floor(Math.random()*this.numberCells);return this.ArrayCells[e]}opacityBoard(){this.element.style.opacity=0}}const t=e.p+"2dbd01ce16c0fa83cb67.png",i=e.p+"a95d833c2f7e87c6d35b.png",r=e.p+"aac5c55eb720c6b8d6ee.png";class l{constructor(){this.element=document.createElement("img"),this.element.classList.add("movImg"),this.element.src=t,this.isVisible=!1}showImg(e){e.append(this.element),this.isVisible=!0}hide(){this.element.closest(".cell").innerHTML="",this.isVisible=!1}nextSeriesImg(e=0){const s={0:t,1:i,2:r};this.element.src=s[e]||t}}class n{constructor(e=5,s=!1){this.element=document.createElement("div"),this.seriesEnabled=s,this.numberSeries=0,this.score=0,this.missNumber=0,this.missMax=e,this.displayScore()}increment(){!0===this.seriesEnabled?(3===this.numberSeries&&(this.numberSeries=0),this.numberSeries++,this.score+=this.numberSeries):this.score++,this.displayScore()}miss(){this.missNumber++,this.numberSeries=0,this.displayScore()}displayScore(){this.element.textContent=`Очки: ${this.score}, Промахи: ${this.missNumber} / ${this.missMax}`}}new class{constructor(e=5,t=!1){this.missMax=e,this.seriesEnabled=t,this.board=new s,this.score=new n(this.missMax,this.seriesEnabled),this.goblinsImg=new l,this.duration=1e3,this.interval=null,this.currentCell=null,this.flagOfClick=null}init(){let e=document.getElementById("container");this.board.createBoard(),e.append(this.score.element,this.board.element),this.click(),this.start()}click(){this.board.element.addEventListener("click",(e=>{e.target===this.goblinsImg.element?(this.flagOfClick=!0,this.score.increment(),this.goblinsImg.nextSeriesImg(this.score.numberSeries),this.goblinsImg.hide()):this.goblinsImg.isVisible&&(this.flagOfClick=!0,this.score.miss(),this.goblinsImg.nextSeriesImg(this.score.numberSeries),this.goblinsImg.hide())}))}start(){this.interval=setInterval((()=>{let e;do{e=this.board.getRandomCell()}while(this.currentCell===e);this.currentCell=e,this.goblinsImg.showImg(this.currentCell),!1===this.flagOfClick&&(this.score.miss(),this.goblinsImg.nextSeriesImg(this.score.numberSeries)),this.score.missNumber>=this.score.missMax&&this.end(),this.flagOfClick=!1}),this.duration)}end(){clearInterval(this.interval),this.goblinsImg.hide(),setTimeout((()=>alert(`Игра окончена. Очки: ${this.score.score}`)),0)}}(5,!1).init()})();